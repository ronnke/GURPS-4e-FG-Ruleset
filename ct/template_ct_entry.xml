<?xml version="1.0" encoding="utf-8"?>

<!-- 
  Please see the license.html file included with this distribution for 
  attribution and copyright information.
-->

<root>
	<template name="button_ctentry_skip">
		<buttoncontrol name="activateskip">
			<anchored to="rightanchor" width="20" height="20">
				<top />
				<right anchor="left" relation="relative"  offset="-5"/>
			</anchored>
			<state icon="button_skip" tooltipres="ct_tooltip_skip" />
			<state icon="button_skip_down" />
			<script>
        function onValueChanged()
          if window.onSkipChanged() then
            window.onSkipChanged();
          end
        end
      </script>
		</buttoncontrol>
	</template>

  <template name="number_ctentry_fatigue">
    <number_ct_crosslink name="fatigue">
      <anchored to="rightanchor" width="30" height="20">
        <top />
        <right anchor="left" relation="relative" offset="-10" />
      </anchored>
      <tabtarget prev="injury" next="injury" />
      <script>
        function handleDrop(draginfo)
					if draginfo.getType() == "number" then
						local node = window.getDatabaseNode();
						local rActor = ActorManager.resolveActor(node);
						ActionFatigue.applyFatigue(nil, rActor, CombatManager.isCTHidden(node), draginfo.getDescription(), draginfo.getNumberData());
					end
        end
      </script>
      <min value="0" />
      <hideonvalue value="0" />
    </number_ct_crosslink>
  </template>

  <template name="number_ctentry_injury">
    <number_ct_crosslink name="injury">
      <anchored to="rightanchor" width="30" height="20">
        <top />
        <right anchor="left" relation="relative" offset="-10" />
      </anchored>
      <tabtarget prev="fatigue" next="fatigue" />
      <script>
        function handleDrop(draginfo)
					if draginfo.getType() == "number" then
						local node = window.getDatabaseNode();
						local rActor = ActorManager.resolveActor(node);
						ActionDamage.applyDamage(nil, rActor, CombatManager.isCTHidden(node), draginfo.getDescription(), draginfo.getNumberData());
					end
        end
      </script>
      <min value="0" />
      <hideonvalue value="0" />
    </number_ct_crosslink>
  </template>

  <template name="custom_ctentry_status">
    <subwindow name="ct_status">
      <anchored to="rightanchor" width="40" height="20" >
        <top />
        <right anchor="left" relation="relative" offset="-5" />
      </anchored>
      <class>ct_status</class>
      <activate />
      <fastinit />
    </subwindow>
  </template>

  <windowclass name="ct_status">
    <margins control="0,0,0,0" />
    <sheetdata>
      <simplestring name="hpstatus">
        <anchored height="10">
          <top />
          <left />
          <right />
        </anchored>
        <script file="common/scripts/string_crosslink.lua" />
        <font>sheetlabelsmall</font>
        <color>#C11B17</color>
        <readonly />
        <center />
        <nolinkwidget />
      </simplestring>
      <simplestring name="fpstatus">
        <anchored to="hpstatus" height="10">
          <top anchor="bottom" />
          <left />
          <right />
        </anchored>
        <script file="common/scripts/string_crosslink.lua" />
        <font>sheetlabelsmall</font>
        <color>#C11B17</color>
        <readonly />
        <center />
        <nolinkwidget />
      </simplestring>
    </sheetdata>
  </windowclass>

  <template name="string_ctentry_hpstatus">
    <simplestring name="hpstatus">
      <script file="common/scripts/string_crosslink.lua" />
      <anchored to="rightanchor" width="40" height="20">
        <top />
        <right anchor="left" relation="relative" offset="-5" />
      </anchored>
      <tabtarget prev="name" />
      <color>#C11B17</color>
      <readonly />
      <center />
      <nolinkwidget />
    </simplestring>
  </template>

  <template name="string_ctentry_fpstatus">
    <simplestring name="fpstatus">
      <script file="common/scripts/string_crosslink.lua" />
      <anchored to="rightanchor" width="40" height="20">
        <top />
        <right anchor="left" relation="relative" offset="-5" />
      </anchored>
      <tabtarget prev="name" />
      <color>#C11B17</color>
      <readonly />
      <center />
      <nolinkwidget />
    </simplestring>
  </template>

  <template name="number_ctentry_fps">
		<number_ct_crosslink name="fps">
			<anchored to="rightanchor" width="30" height="20">
				<top />
				<right anchor="left" relation="relative" offset="-5" />
			</anchored>
			<tabtarget prev="name" />
			<script>
				function handleDrop(draginfo)
					if draginfo.getType() == "number" then
						local node = window.getDatabaseNode();
						local rActor = ActorManager.resolveActor(node);
						ActionFatigue.applyFatigue(nil, rActor, CombatManager.isCTHidden(node), draginfo.getDescription(), draginfo.getNumberData());
					end
				end
			</script>
      <readonly />
    </number_ct_crosslink>
	</template>

	<template name="number_ctentry_hps">
		<number_ct_crosslink name="hps">
			<anchored to="rightanchor" width="30" height="20">
				<top />
				<right anchor="left" relation="relative" offset="-10" />
			</anchored>
			<tabtarget prev="name" />
			<script>
        function handleDrop(draginfo)
					if draginfo.getType() == "number" or draginfo.getType() == "damage"then
						local node = window.getDatabaseNode();
						local rActor = ActorManager.resolveActor(node);
						ActionDamage.applyDamage(nil, rActor, CombatManager.isCTHidden(node), draginfo.getDescription(), draginfo.getNumberData());
					end
        end
      </script>
      <readonly />
    </number_ct_crosslink>
	</template>

  <template name="number_ctentry_speed">
    <number_ct_crosslink name="speed">
      <anchored to="rightanchor" width="30" height="20">
        <top />
        <right anchor="left" relation="relative" offset="-10" />
      </anchored>
      <tabtarget prev="name" />
      <script>
        function update()
					window.windowlist.applySort();
        end
      </script>
    </number_ct_crosslink>
  </template>

  <template name="number_clientct_fatigue">
    <number_ct_static name="fatigue">
      <anchored to="healthbase" width="30" height="20">
        <top />
        <right />
      </anchored>
    </number_ct_static>
  </template>

  <template name="number_clientct_injury">
    <number_ct_static name="injury">
      <anchored to="fatigue" width="30" height="20">
        <top />
        <right anchor="left" offset="-10" />
      </anchored>
    </number_ct_static>
  </template>

  <template name="number_clientct_fps">
    <number_ct_static name="fps">
      <anchored to="injury" width="30" height="20">
        <top />
        <right anchor="left" offset="-10" />
      </anchored>
      <script>
        function onInit()
					window.onFatigueChanged();
        end

				function onValueChanged()
					window.onFatigueChanged();
        end
      </script>
      <hideonvalue merge="delete" />
    </number_ct_static>
  </template>

  <template name="number_clientct_hps">
    <number_ct_static name="hps">
      <anchored to="fps" width="30" height="20">
        <top />
        <right anchor="left" offset="-10" />
      </anchored>
      <script>
        function onInit()
					window.onHealthChanged();
        end

				function onValueChanged()
					window.onHealthChanged();
        end
      </script>
      <hideonvalue merge="delete" />
    </number_ct_static>
  </template>
</root>
